<!DOCTYPE html>
<html lang="en">
  <!-- Head Section -->
  <head>
    <meta charset="utf-8">
    <title>Registration</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./Project1.css">
    <style>
        body,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
          font-family: "Raleway", sans-serif
        }
      </style>
  </head>

  <body>
  <!-- Sidebar/menu -->
  <nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
    <div class="w3-container">
      <a href="#" onclick="w3_close()" class="w3-hide-large w3-right w3-jumbo w3-padding w3-hover-grey"
        title="close menu">
        <i class="fa fa-remove"></i>
      </a>
      <img src="./Images/Pokemon/trainer.jpg" style="width:45%;" class="w3-round"><br><br>
      <h4><b>Welcome to Project 1</b></h4>
      <p class="w3-text-grey">Made by Kyle Peniston</p>
    </div>
    <div class="w3-bar-block">
      <a href="./Project1.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding w3-text-teal"><i
        class="fa fa-th-large fa-fw w3-margin-right"></i>Home</a>
      <a href="./Registration.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i
          class="fa fa-envelope fa-fw w3-margin-right"></i>Registration</a>
      <a href="./Animation.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i
          class="fa fa-envelope fa-fw w3-margin-right"></i>Animation</a>
  </div>
  </nav>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer"
    title="close side menu" id="myOverlay"></div>

  <!-- !PAGE CONTENT! -->
  <div class="w3-main" style="margin-left:300px">

    <!-- Header -->
    <header id="home">
      <a href="#"><img src="./Images/Pokemon/trainer.jpg" alt="My Logo" style="width:65px;"
          class="w3-circle w3-right w3-margin w3-hide-large w3-hover-opacity"></a>
      <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()"><i
          class="fa fa-bars"></i></span>
      <div class="w3-container seven">
        <h1><b>Registration</b></h1>
        <h1 class="home-header-title">Sign Up To Battle The Champion</h1>
      </div>
    </header>

    <!-- Contact Section -->
<div class="w3-container w3-padding-large w3-grey" style="background-color: #e0bcbc!important;">
    <h4 id="register"><b>Registration</b></h4>
    <hr class="w3-opacity">
    <form action="./action_page.txt" target="_blank" id="registrationForm">
      <div class="w3-section">
        <label for="userName">User Name</label>
        <input class="w3-input w3-border" type="text" name="userName" id="userName" min="6" max="50" required>
        <span id="errUserName" class="hide errMessageBox">User Name must be between 6 and 50 characters.</span>
      </div>
      <div class="w3-section">
        <label for="password">Password</label>
        <input class="w3-input w3-border" type="password" name="password" id="password" min="8" max="50" required>
        <span id="errPassword" class="hide errMessageBox">Password must be between 8 and 50 characters.</span>
      </div>
      <div class="w3-section">
        <label for="repPassword">Repeat Password</label>
        <input class="w3-input w3-border" type="password" name="repPassword" id="repPassword" min="8" max="50" required>
        <span id="errRepPassword" class="hide errMessageBox">Passwords do not match</span>
      </div>
      <div class="w3-section">
        <label for="firstName">First Name</label>
        <input class="w3-input w3-border" type="text" name="firstName" id="firstName" max="50" required>
        <span id="errFirstName" class="hide errMessageBox">First Name is required and must be less than 50 characters.</span>
      </div>
      <div class="w3-section">
        <label for="lastName">Last Name</label>
        <input class="w3-input w3-border" type="text" name="lastName" id="lastName" max="50" required>
        <span id="errLastName" class="hide errMessageBox">Last Name is required and must be less than 50 characters.</span>
      </div>
      <div class="w3-section">
        <label for="addr1">Address Line 1</label>
        <input class="w3-input w3-border" type="text" name="addr1" id="addr1" max="100" required>
        <span id="errAddr1" class="hide errMessageBox">Address is required and must be less than 100 characters.</span>
      </div>
      <div class="w3-section">
        <label for="addr2">Address Line 2</label>
        <input class="w3-input w3-border" type="text" name="addr2" id="addr2"  placeholder="Optional" max="100">
        <span id="errAddr2" class="hide errMessageBox">Address 2 must be less than 100 characters.</span>
      </div>
      <div class="w3-section">
        <label for="city">City</label>
        <input class="w3-input w3-border" type="text" name="city" id="city" max="50" required>
        <span id="errCity" class="hide errMessageBox">City is required and must be less than 50 characters.</span>
      </div>
      <div class="w3-section">
        <label for="state">State</label>
        <select name="state" id="state" required>
            <option value="AL">Alabama</option>
            <option value="AK">Alaska</option>
            <option value="AZ">Arizona</option>
            <option value="AR">Arkansas</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="DC">District Of Columbia</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PA">Pennsylvania</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
        </select>
      </div>
      <div class="w3-section">
        <label for="zipcode">ZipCode</label>
        <input class="w3-input w3-border" type="text" name="zipcode" id="zipcode"  placeholder="######" min="5" max="10" required>
        <span id="errZipcode" class="hide errMessageBox">Zipcode must be between 5 or 9 characters</span>
      </div>
      <div class="w3-section">
        <label for="phoneNumber">Phone Number</label>
        <input class="w3-input w3-border" type="text" name="phoneNumber" id="phoneNumber"  placeholder="(###-###-####)" max="12" required>
        <span id="errPhoneNumber" class="hide errMessageBox">Phone Number must be less than 12 characters</span>      
      </div>
      <div class="w3-section">
        <label for="email">Email</label>
        <input class="w3-input w3-border" type="email" name="email" id="email"  placeholder="123@abc.com" required>
        <span id="errEmail" class="hide errMessageBox">Email must match format "123@abc.com"</span>      
      </div>
      <div class="w3-section">GENDER: <br/>
            <label for="gender">Male</label>
            <input class="w3-input w3-border" type="radio" name="gender" id="gender1" value="Male" required>
            <label for="gender">Female</label>
            <input class="w3-input w3-border" type="radio" name="gender" id="gender2" value="Female">
            <label for="gender">Other</label>
            <input class="w3-input w3-border" type="radio" name="gender" id="gender3" value="Other">
        </div>
      <div class="w3-section">Maritial Status: <br/>
        <label for="mStatus">Married</label>
        <input class="w3-input w3-border" type="radio" name="mStatus" id="mStatus1" value="Married" required>
        <label for="mStatus">Divorced</label>
        <input class="w3-input w3-border" type="radio" name="mStatus" id="mStatus2" value="Divorced">
        <label for="mStatus">Lucky</label>
        <input class="w3-input w3-border" type="radio" name="mStatus" id="mStatus3" value="Lucky">
      </div>
      <div class="w3-section">
        <label for="dob">Date of Birth</label>
        <input class="w3-input w3-border" type="date" name="dob" id="dob" required>
      </div>
      <button type="submit" class="w3-button w3-black w3-margin-bottom" id="submitButton" disabled><i
          class="fa fa-paper-plane w3-margin-right"></i>Submit</button>
        <button type="reset" class="w3-button w3-black w3-margin-bottom" id="resetButton"><i
            class="fa fa-paper-plane w3-margin-right"></i>Reset</button>
    </form>
  </div>

    <!-- Footer -->
    <footer class="w3-container w3-padding-32 w3-dark-grey">
      <div class="w3-row-padding">
        <div class="w3-third">
          <h3>FOOTER</h3>
          <p>I wanna be the very best! Like no one ever was!<br/>
            To catch them is my real test, to train them is my cause!
          </p>
          <p>Powered by Friendship</a></p>
        </div>

        <div class="w3-third">
          <h3>BLOG POSTS</h3>
          <ul class="w3-ul w3-hoverable">
            <li class="w3-padding-16">
              <img src="./Images/Pokemon/todd.jpg" alt="Todd" class="w3-left w3-margin-right" style="width:50px">
              <span class="w3-large">LETS GO WATCH SOME POKEMON</span><br>
              <span>I took some great shots of your championship battle! Pikachu has never looked so cool!</span>
            </li>
            <li class="w3-padding-16">
              <img src="./Images/Pokemon/may.jpg" alt="May" class="w3-left w3-margin-right" style="width:50px">
              <span class="w3-large">STYLISH!</span><br>
              <span>Piplup and I were cheering for you in the stands! We knew you would be the very best!</span>
            </li>
          </ul>
        </div>

        <div class="w3-third">
          <h3>External Links</h3>
          <div class="w3-panel w3-large">
            <a href="https://www.facebook.com/Pokemon/" class="icon-block" target="_blank" style="font-size: 40px">
              <i class="fa fa-facebook-official w3-hover-opacity"></i>
            </a>
            <a href="https://www.linkedin.com/in/kyle-peniston-614628158/" class="icon-block" target="_blank" style="font-size: 40px">
              <i class="fa fa-linkedin w3-hover-opacity"></i>
            </a>
            <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" class="icon-block" target="_blank" style="font-size: 40px">
              <i class="fa fa-youtube w3-hover-opacity"></i>
            </a>
          </div>
        </div>
      </div>
    </footer>
  </div>  

  <script>
    // Script to open and close sidebar
    function w3_open() {
      document.getElementById("mySidebar").style.display = "block";
      document.getElementById("myOverlay").style.display = "block";
    }

    function w3_close() {
      document.getElementById("mySidebar").style.display = "none";
      document.getElementById("myOverlay").style.display = "none";
    }

     //Validate UserName
     document.getElementById("userName").addEventListener("focusout", function(event){
      let userInput = event.srcElement.value

      if (userInput.length < 50 && userInput.length > 6) {
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errUserName").classList.add("hide")
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errUserName").classList.remove("hide")
      }

    });   

    //Validate Password Complexity
    document.getElementById("password").addEventListener("focusout", function(event){
      let strongPassword = new RegExp('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})')

      if (strongPassword.test(event.target.value)) {
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errPassword").classList.add("hide")
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errPassword").classList.remove("hide")
      }

    });

    //Validate Repeat Password
    document.getElementById("repPassword").addEventListener("focusout", function(event){
      let strongPassword = new RegExp('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})')
      let repPassword = event.target.value;
      let origPassword = document.getElementById("password").value

      if (repPassword == origPassword && strongPassword.test(event.target.value)) {
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errRepPassword").classList.add("hide")
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errRepPassword").classList.remove("hide")
      }

    });

    //Validate FirstName
    document.getElementById("firstName").addEventListener("focusout", function(event){
      let userInput = event.srcElement.value

      if (userInput.length < 50 && userInput.length != 0) {
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errFirstName").classList.add("hide")
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errFirstName").classList.remove("hide")
      }

    });   

    //Validate LastName
    document.getElementById("lastName").addEventListener("focusout", function(event){
      let userInput = event.srcElement.value

      if (userInput.length < 50 && userInput.length != 0) {
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errLastName").classList.add("hide")
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errLastName").classList.remove("hide")
      }

    }); 

    //Validate Addr1
    document.getElementById("addr1").addEventListener("focusout", function(event){
      let userInput = event.srcElement.value

      if (userInput.length < 100 && userInput.length != 0) {
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errAddr1").classList.add("hide")
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errAddr1").classList.remove("hide")
      }

    }); 

    //Validate Addr2
    document.getElementById("addr2").addEventListener("focusout", function(event){
      let userInput = event.srcElement.value

      if (userInput.length < 100) {
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errAddr2").classList.add("hide")
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errAddr2").classList.remove("hide")
      }

    });

    //Validate City
    document.getElementById("city").addEventListener("focusout", function(event){
      let userInput = event.srcElement.value

      if (userInput.length < 50 && userInput.length != 0) {
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errCity").classList.add("hide")
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errCity").classList.remove("hide")
      }

    }); 

    //Validate Zipcode
    document.getElementById("zipcode").addEventListener("focusout", function(event){
      let isValidZip = /(^\d{5}$)|(^\d{5}\d{4}$)|(^\d{5}-\d{4}$)/.test(event.target.value);

      if (isValidZip) {
        let longZip = event.target.value.length
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errZipcode").classList.add("hide")

        if (longZip == 9) {
          let first = event.target.value.slice(0, 5)
          let last = event.target.value.slice(5, 9)
          let returnValue = first + '-' + last
          event.target.value = returnValue
        }
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errZipcode").classList.remove("hide")
      }

    });

    //Validate PhoneNumber
    document.getElementById("phoneNumber").addEventListener("focusout", function(event){
      let str = event.target.value
      let cleaned = ('' + str).replace(/\D/g, '');
      
      //Check if the input is of correct length
      let match = cleaned.match(/^(\d{3})(\d{3})(\d{4})$/);
      if (match) {
        let returnValue = '(' + match[1] + ')-' + match[2] + '-' + match[3]
        event.target.value = returnValue

        event.srcElement.classList.remove("errorBox")
        event.srcElement.classList.add("successBox")
        document.getElementById("errPhoneNumber").classList.add("hide")
      } else{
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errPhoneNumber").classList.remove("hide")        
      }
    });

    //Validate Email
    document.getElementById("email").addEventListener("focusout", function(event){
      let userInput = event.srcElement.value
      let isValid = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(userInput)

      if (isValid) {
        event.srcElement.classList.remove("errorBox")

        event.srcElement.classList.add("successBox")
        document.getElementById("errEmail").classList.add("hide")
      } else {
        event.srcElement.classList.remove("successBox")

        event.srcElement.classList.add("errorBox")
        document.getElementById("errEmail").classList.remove("hide")
      }

    });

    //Set up listener to remove disabled attr
    //A better way to validate would be to create an object and validate against the object's data
    //We can manipulate the dom and hack the "successBox" attribute to enable the submit button 
    //but then the built in HTML form validation will catch issues so it works for this purpose.
    //That is why I only selected the Input boxes since the radios would be handled by built in features.
    setInterval(listener, 10000);

    function listener() {
      let submitButton = document.getElementById("submitButton")
      let isValid = false

      let success = document.querySelectorAll('.successBox')

      if (success.length >= 10) {
        submitButton.disabled = false
        return true
      } else {
        submitButton.disabled = true
        return false
      }
    }

    document.getElementById("submitButton").addEventListener("click", function(event){
      let validation = listener()

      if (validation) {
        console.log("Submit successful! Push data to server")
      } else {
        event.preventDefault()
      }
    });
  
  </script>

  </body>
<> 